;=======================================================================
 format PE GUI 4.0
;=======================================================================
 entry start
;=======================================================================
include 'win32a.inc' ;*
include 'rc.inc' ;*
;include 'ENCODING\WIN1251.INC'
;=======================================================================

;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
section '.data' data readable writeable
;-----------------------------------------------------------------------
  hInstance dd ?
  txt_buff  rb 520
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
section '.code' code readable executable
;-----------------------------------------------------------------------
  start:

        invoke  GetModuleHandle,0
        invoke  DialogBoxParam,eax,D_MAIN,HWND_DESKTOP,DialogProc,0
        invoke  ExitProcess,0
;=======================================================================
;
;=======================================================================
proc DialogProc hWnd, uMsg, wParam, lParam
;-----------------------------------------------------------------------
        cmp     [uMsg],WM_INITDIALOG
        je      .wminitdialog
        cmp     [uMsg],WM_COMMAND
        je      .wmcommand
        cmp     [uMsg],WM_CLOSE
        je      .wmclose
        xor     eax,eax
        ret
;-----------------------------------------------------------------------
  .wminitdialog:
        jmp     .processed
;-----------------------------------------------------------------------
  .wmcommand:
        cmp     [wParam],IDCANCEL
        je      .wmclose
        cmp     [wParam],IDOK
        jne     .processed
;------------------------------------------------------------\\
        ; TODO
;------------------------------------------------------------//
        jmp     .processed
;-----------------------------------------------------------------------
  .wmclose:
        invoke  EndDialog,[hWnd],0
;-----------------------------------------------------------------------
  .processed:
        mov     eax,TRUE
;-----------------------------------------------------------------------
  .finish:
        ret
;-----------------------------------------------------------------------
endp
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
include "idata.inc" ;*
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
section '.rsrc' resource data readable
;-----------------------------------------------------------------------
  directory RT_MENU,menus,\
	    RT_DIALOG,dialogs

  resource menus,\
	   IDM_MAIN,LANG_ENGLISH+SUBLANG_DEFAULT,main_menu

include "dialogs.tab"

  menu main_menu
        menuitem 'File',0,MFR_POPUP
            menuitem 'OK',B_OK
            menuseparator
            menuitem 'Exit',B_CAN,MFR_END
        menuitem 'Help',0,MFR_POPUP + MFR_END
            menuitem 'About',B_OK,MFR_END,MFR_END
            
include "dialogs.dat"

;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
